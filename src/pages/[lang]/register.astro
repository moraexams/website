---
import type { GetStaticPaths } from "astro";
import { langStaticRoutes } from "../../i18n/ui";
import Layout from "../../layouts/Layout.astro";
import NavigationBar from "../../sections/1-navigation-bar.astro";
import Button from "../../components/Button.astro";
import { useTranslations, getLangFromUrl } from "../../i18n/utils";

const t = useTranslations(getLangFromUrl(Astro.url));

export const getStaticPaths = (() => {
	return langStaticRoutes;
}) satisfies GetStaticPaths;
---

<Layout pageTitle={t("student_register__title")}>
	<div class="bg-purple-800">
		<NavigationBar />
	</div>
	<section
		class="min-h-screen bg-delft-blue-50/50 text-primary-900 flex justify-center"
	>
		<ul
			class="max-w-screen-xl my-10 sm:m-20 bg-white shadow sm:rounded-lg flex justify-center px-6 py-5 sm:p-12 flex-col items-center h-fit flex-1"
		>
			<h1 class="text-4xl font-bold mb-8">{t("student_register__title")}</h1>

			<ul class="list-none pl-0 max-w-[650px] text-lg">
				<li
					style="background: #efe6f5; padding: 15px; border-left: 4px solid #6b21a8; margin-bottom: 10px;"
				>
					{t("student_register__instruction_1")}
				</li>

				<li
					style="background: #efe6f5; padding: 15px; border-left: 4px solid #6b21a8; margin-bottom: 10px;"
					set:html={t("student_register__instruction_2")}
				/>

				<div
					style="background: #efe6f5; padding: 15px; border-left: 4px solid #6b21a8; margin-bottom: 10px;"
				>
					<h3 style="color: #490665; margin-top: 0;">
						{t("student_register__registration_fee_title")}
					</h3>
					<ul class="grid grid-cols-[auto_1fr] gap-x-8 pl-2 fee-list">
						<li class="contents">
							<span>
								{t("student_register__registration_fee_ict_only_label")}
							</span>
							<span class="font-bold"
								>{t("student_register__registration_fee_ict_only_amount")}</span
							>
						</li>
						<li class="contents">
							<span>
								{t("student_register__registration_fee_other_streams_label")}
							</span>
							<span class="font-bold"
								>{
									t("student_register__registration_fee_other_streams_amount")
								}</span
							>
						</li>
					</ul>
				</div>

				<div
					style="background: #efe6f5; padding: 15px; border-left: 4px solid #6b21a8; margin-bottom: 10px;"
				>
					<h3 style="color: #490665; margin-top: 0;">
						{t("student_register__registration_fee_bank_details_title")}
					</h3>
					<ul class="grid grid-cols-[auto_1fr] gap-x-8 gap-y-1.5 pl-0">
						<li class="contents">
							<label
								>{t("student_register__registration_fee_account_name")}</label
							>
							<span>A ARRATHIKASARMA</span>
						</li>
						<li class="contents">
							<label>{t("student_register__registration_fee_account_no")}</label
							>
							<span>91616090</span>
						</li>
						<li class="contents">
							<label>{t("student_register__registration_fee_bank_name")}</label>
							<span>BOC</span>
						</li>
						<li class="contents">
							<label
								>{t("student_register__registration_fee_bank_branch")}</label
							>
							<span>Nallur</span>
						</li>
						<li class="contents">
							<label class=""
								>{
									t("student_register__registration_fee_description_format")
								}</label
							>
							<span class="">
								[NIC] - [FULL NAME]
								<span class="block"> (e.g., 200500000000 - John Doe)</span>
							</span>
						</li>
					</ul>
				</div>
			</ul>

			<form id="instructionForm">
				<label class="flex items-start gap-2 my-6 text-lg">
					<input type="checkbox" id="agreeCheckbox" class="mt-2" />
					<span>
						{t("student_register__understood_text")}
					</span>
				</label>
				<div class="flex justify-end mt-4">
					<Button type="button" id="nextButton">Next</Button>
				</div>
			</form>
		</ul>
	</section>
	<script>
		document.addEventListener("DOMContentLoaded", () => {
			const checkbox = document.getElementById(
				"agreeCheckbox",
			) as HTMLInputElement;
			const nextButton = document.getElementById("nextButton");

			nextButton.addEventListener("click", () => {
				if (checkbox.checked) {
					const lang = window.location.pathname.split("/")[1];
					window.location.href = `/${lang}/registration-2`;
				} else {
					alert(
						"Please confirm you've read the instructions before proceeding.",
					);
				}
			});
		});
	</script>
</Layout>

<style>
	ul li > span:first-child::before {
		@apply mr-2;
		content: "-";
	}
	ul li label {
		@apply font-bold;
	}
</style>
