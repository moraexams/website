---
import Layout from "../../layouts/Layout.astro";
import { getLangFromUrl, useTranslations } from "../../i18n/utils";
import { langStaticRoutes } from "../../i18n/ui";
import type { GetStaticPaths } from "astro";
import NavigationBar from "../../sections/1-navigation-bar.astro";
import HallOfFameContent from "../../data/past-leaderships.json";
import { DEPARTMENTS } from "../../utils/utils";
import Footer from "../../sections/16-footer.astro";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

export const getStaticPaths = (() => {
	return langStaticRoutes;
}) satisfies GetStaticPaths;
---

<Layout
	pageTitle={t("leadership_timeline__title")}
	ogImageSlug="leadership-timeline"
>
	<NavigationBar />
	<section
		class="bg-white text-primary-900 flex flex-col min-h-[50vh] gap-x-5 mb-5"
	>
		<h1>{t("leadership_timeline__title")}</h1>

		{
			HallOfFameContent.map((item) => (
				<div id={item.year}>
					<div class="flex gap-2 mb-4 items-center text-2xl">
						<a
							href={`/${lang}/leadership-timeline#${item.year}`}
							class="text-primary-900 no-underline hover:underline"
						>
							#
						</a>
						<h2 class="my-0">{item.year}</h2>
					</div>

					<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 mb-10">
						{item.organizing_committee.map((member) => (
							<div class="px-5 py-2 rounded-xl bg-[#fff] border border-solid border-[#3b3b3b32] text-left grid grid-cols-[1fr_auto]">
								<h3 class="text-xl mb-0 mt-1 col-start-1">
									{member[`name_${lang}`]?.toUpperCase() ||
										member.name_en.toUpperCase()}
								</h3>

								<span class="mb-0 text-lg text-[#cd5c5c] font-medium col-start-1">
									{/* @ts-expect-error */}
									{t(`committee__${member.position}_post`)}
								</span>
								<p class="mt-2 col-start-1">
									BSc Eng. (Hons) (Reading),
									<br />
									{DEPARTMENTS[member.department_code][lang]},<br />
									{t("committee__university")}
								</p>
								<div class="col-start-2 row-start-1 row-span-3 flex flex-col gap-1 mt-1">
									{member.contact?.web ? (
										<a
											href={member.contact.web}
											target="_blank"
											rel="noopener noreferrer"
											class="text-blue-500 transition-colors hover:text-blue-800"
										>
											<svg
												xmlns="http://www.w3.org/2000/svg"
												width="24"
												height="24"
												viewBox="0 0 24 24"
												fill="none"
												stroke="currentColor"
												stroke-width="2"
												stroke-linecap="round"
												stroke-linejoin="round"
												class="icon icon-tabler icons-tabler-outline icon-tabler-world-www"
											>
												<path stroke="none" d="M0 0h24v24H0z" fill="none" />
												<path d="M19.5 7a9 9 0 0 0 -7.5 -4a8.991 8.991 0 0 0 -7.484 4" />
												<path d="M11.5 3a16.989 16.989 0 0 0 -1.826 4" />
												<path d="M12.5 3a16.989 16.989 0 0 1 1.828 4" />
												<path d="M19.5 17a9 9 0 0 1 -7.5 4a8.991 8.991 0 0 1 -7.484 -4" />
												<path d="M11.5 21a16.989 16.989 0 0 1 -1.826 -4" />
												<path d="M12.5 21a16.989 16.989 0 0 0 1.828 -4" />
												<path d="M2 10l1 4l1.5 -4l1.5 4l1 -4" />
												<path d="M17 10l1 4l1.5 -4l1.5 4l1 -4" />
												<path d="M9.5 10l1 4l1.5 -4l1.5 4l1 -4" />
											</svg>
										</a>
									) : null}
									{member.contact?.linkedin ? (
										<a
											href={member.contact.linkedin}
											target="_blank"
											rel="noopener noreferrer"
											class="text-blue-500 transition-colors hover:text-blue-800"
										>
											<svg
												xmlns="http://www.w3.org/2000/svg"
												width="24"
												height="24"
												viewBox="0 0 24 24"
												fill="none"
												stroke="currentColor"
												stroke-width="2"
												stroke-linecap="round"
												stroke-linejoin="round"
												class="icon icon-tabler icons-tabler-outline icon-tabler-brand-linkedin"
											>
												<path stroke="none" d="M0 0h24v24H0z" fill="none" />
												<path d="M8 11v5" />
												<path d="M8 8v.01" />
												<path d="M12 16v-5" />
												<path d="M16 16v-3a2 2 0 1 0 -4 0" />
												<path d="M3 7a4 4 0 0 1 4 -4h10a4 4 0 0 1 4 4v10a4 4 0 0 1 -4 4h-10a4 4 0 0 1 -4 -4z" />
											</svg>
										</a>
									) : null}
								</div>
							</div>
						))}
					</div>
				</div>
			))
		}
	</section>
	<section class="note">
		<div>
			The above timeline is not complete yet. If your name is missing or
			incorrect, please contact us at <a href="mailto:examsmora@gmail.com"
				>examsmora@gmail.com</a
			>.
		</div>
	</section>
	<Footer />
</Layout>

<style is:global>
	body > * {
		@apply px-[var(--body-margin-x)];
	}
	* {
		scroll-margin: 100px;
	}
	.note {
		div {
			@apply px-3 py-2 rounded-md border-[3px] border-solid border-purple-600 max-w-prose mx-auto bg-purple-100/30 text-lg mb-10;
		}
		a {
			@apply text-purple-800 no-underline;
		}
	}
</style>
